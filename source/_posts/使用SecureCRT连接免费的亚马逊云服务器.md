---
title: 使用SecureCRT连接免费的亚马逊云服务器
permalink: shi-yong-securecrtlian-jie-ya-ma-xun-yun-fu-wu-qi
id: 20
updated: '2016-07-20 01:07:38'
date: 2016-07-19 22:09:21
tags:
---

亚马逊AWS有一年的免费体验，相比国内的阿里云、腾讯云的优惠政策更实在，而且又不用认证、也不用备案，一个邮箱帐号就能获得，简直就是我等学生（虽然已经不是了，但刚出来工作没几个钱呀！）的福利！

在亚马逊中，选择“新加坡”、“首尔”、“东京”这几个位于亚洲的节点响应速度都算是比较快的，虽然比不上国内，但是结合七牛等CDN云服务一样可以做到不错的响应速度。

而本篇的主题，就是因AWS的特殊连接方式而产生的，虽然网上已经有很多前辈给了教程，但是始终不如自己写一下，等以后可以方便地查到更方便。


###### 连接服务器
1. 创建AWS实例的时候，会得到一个.pem后缀的密钥文件，我们需要通过这个文件去连接服务器。
2. 打开SecureCRT，点击菜单栏“工具”-->“转换密钥为OpenSHH格式”,然后在弹出的文件选择框中选择pem文件，然后在接下来的文件选项框中选择保存转换后密钥对文件的保存路径，这样密钥就保存完了。
3. 点击“快速连接”按钮，在弹出的“快速连接”窗口中，输入“服务器ip地址”，不输入用户名，在“鉴权”一栏，把“公钥”移动到第一位，即“密码”上面。
4. 选择“公钥”，然后点击“属性”，再选择“使用会话公钥设置”，在会话设置中选择“使用身份或证书文件”，并点击“...”按钮选择第2步生成的.pub文件。
6. 最后点击“确定”，并在“快速连接”窗口中点击“连接”，然后在弹出的提示框中点击“是”，此时就已经可以成功连接到服务器了。


###### 改为使用密码登录
使用密钥文件连接，虽然是大大加强安全性了，但是对于个人服务器来说就很不方便了，所以，这里把前辈们给出的方法搬过来。

1. 修改ROOT密码
`sudo passwd root`

2. 修改sshd_config文件的限权，用完再把权限改回来
`sudo chmod 777 /etc/ssh/sshd_config`

3. 使用vi编辑`vi /etc/ssh/sshd_config` 
 - `PermitRootLogin ` 改为 PermitRootLogin yes
 - `PasswordAuthentication no `  no 改为 yes
 - `UsePAM yes` yes改为no （CentOS此步不需做）

4. 执行`/etc/init.d/sshd restart`或到AWS控制台重启服务器。

这样就搞定啦！！


###### 使用WinSCP连接
对于不习惯命令行的我，文件操作还是使用GUI比较方便，在这方面，WinSCP有绝对的口碑，而使用密钥文件来连接的话，还是要多一些步骤。

1. 新建站点，点击高级按钮，在弹出的“高级站点设置”窗口中，选择“验证”设置项，在“验证参数”选项中点击“...”按钮，选择.pem文件，此时会有将.pem文件转换为PuTTY格式的密钥文件的提示，点击“确定”就好了。
2. 在弹出的“PuTTY Key Generator”窗口中，如果希望使用密钥文件登录时还需要密码才能登录，可以在“KeyPassphrase”输入框中输入密码和确认密码，然后点击“Save Private Key”按钮，在不填密码时会弹出提示，如果确定不用密码就可以直接点击“是”，这时会保存一个.ppk文件到选定的目录。
3. 然后回到“高级站点设置”窗口，重复第一步，不过此时选择的是刚刚生成的.ppk文件，点击“确定”按钮回到登录界面。
4. 登录界面输入主机名，最后点击“登录”按钮即可成功登录。

好啦，关于亚马逊AWS的使用就写到这吧~~